# åŸºäº Git Dependencies æ¶æ„çš„ Vite + Vue3.5 + Typescript + NaviUi ç»„ä»¶åº“

# Git-based ç»„ä»¶åº“ç®¡ç†æ–¹æ¡ˆ

## èƒŒæ™¯è¯´æ˜
åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨å¤šä¸ªé¡¹ç›®ä¹‹é—´å…±äº«ç»„ä»¶åº“ã€‚ä¼ ç»Ÿçš„ç»„ä»¶åº“å…±äº«æ–¹å¼ä¸»è¦æœ‰ï¼š
1. å‘å¸ƒåˆ° npm ä»“åº“
2. Monorepo æ–¹å¼
3. Git ç›¸å…³æ–¹æ¡ˆ

npm å‘å¸ƒæ–¹å¼éœ€è¦é¢å¤–çš„å‘å¸ƒæµç¨‹ï¼Œè€Œ Monorepo æ–¹å¼ä¼šå¼ºåˆ¶é¡¹ç›®ç»“æ„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ¢è®¨äº†åŸºäº Git çš„ä¸¤ç§æ–¹æ¡ˆï¼Œ
ä»¥å¯»æ‰¾ä¸€ç§æ—¢çµæ´»åˆç®€å•çš„ç»„ä»¶åº“å…±äº«æ–¹å¼ã€‚

## æ–¹æ¡ˆå¯¹æ¯”

### npm åŒ…å‘å¸ƒ
é€šè¿‡å°†ç»„ä»¶åº“å‘å¸ƒåˆ° npm ä»“åº“ï¼Œå…¶ä»–é¡¹ç›®é€šè¿‡ npm install å®‰è£…ä½¿ç”¨ã€‚è¿™æ˜¯æœ€ä¼ ç»Ÿå’Œæ ‡å‡†çš„ç»„ä»¶åº“åˆ†å‘æ–¹å¼ã€‚

**ä¼˜åŠ¿ï¼š**
- æ ‡å‡†çš„åŒ…ç®¡ç†å’Œåˆ†å‘æ–¹å¼
- ç‰ˆæœ¬ç®¡ç†è§„èŒƒï¼Œæ”¯æŒè¯­ä¹‰åŒ–ç‰ˆæœ¬
- å®Œæ•´çš„ç”Ÿæ€ç³»ç»Ÿæ”¯æŒ
- å¯ä»¥å‘å¸ƒåˆ°å…¬å…±æˆ–ç§æœ‰ä»“åº“
- ä¾èµ–ç®¡ç†æ¸…æ™°
- æ”¯æŒè‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹
- å¤©ç„¶æ”¯æŒ CDN åˆ†å‘

**åŠ£åŠ¿ï¼š**
- éœ€è¦é¢å¤–çš„å‘å¸ƒæµç¨‹
- ç§æœ‰åŒ…éœ€è¦ä»˜è´¹æˆ–è‡ªå»ºä»“åº“
- æ¯æ¬¡ä¿®æ”¹éƒ½éœ€è¦å‘ç‰ˆæœ¬
- æœ¬åœ°å¼€å‘è°ƒè¯•ç›¸å¯¹ç¹ç
- ç‰ˆæœ¬æ›´æ–°éœ€è¦æ‰€æœ‰é¡¹ç›®æ‰‹åŠ¨å‡çº§
- ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„ä¾èµ–å¯èƒ½äº§ç”Ÿå†²çª

### Monorepo
å°†ç»„ä»¶åº“å’Œä½¿ç”¨å®ƒçš„é¡¹ç›®éƒ½æ”¾åœ¨åŒä¸€ä¸ªä»£ç ä»“åº“ä¸­ç®¡ç†ï¼Œä½¿ç”¨å·¥å…·å¦‚ Lerna, pnpm workspace, Nx ç­‰è¿›è¡Œç®¡ç†ã€‚

**ä¼˜åŠ¿ï¼š**
- ä»£ç é›†ä¸­ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤
- å¯ä»¥å…±äº«é…ç½®å’Œä¾èµ–
- åŸå­æäº¤ï¼Œä¾¿äºè·Ÿè¸ªå˜æ›´
- ä¾èµ–å…³ç³»æ˜ç¡®
- æ”¯æŒå¤šåŒ…è”è°ƒ
- å·¥å…·é“¾ç»Ÿä¸€
- ä¾¿äºè¿›è¡Œè·¨åŒ…ä¿®æ”¹

**åŠ£åŠ¿ï¼š**
- ä»“åº“ä½“ç§¯è¾ƒå¤§
- éœ€è¦ä¸“é—¨çš„å·¥å…·é“¾æ”¯æŒ
- CI/CD é…ç½®å¤æ‚
- å­¦ä¹ æˆæœ¬è¾ƒé«˜
- é¡¹ç›®ç»“æ„å›ºå®š
- ä¸åˆ©äºé¡¹ç›®è§£è€¦
- å›¢é˜Ÿåä½œå¯èƒ½å—é™

### Git Submodule
é€šè¿‡ git submodule å‘½ä»¤ç®¡ç†ç»„ä»¶åº“ã€‚è¿™æ˜¯ Git åŸç”Ÿæ”¯æŒçš„å­æ¨¡å—åŠŸèƒ½ï¼Œå¯ä»¥å°†ä¸€ä¸ªä»“åº“ä½œä¸ºå¦ä¸€ä¸ªä»“åº“çš„å­ç›®å½•ã€‚

**ä¼˜åŠ¿ï¼š**
- å¯ä»¥ç›´æ¥åœ¨ä¸»é¡¹ç›®ä¸­ä¿®æ”¹å­æ¨¡å—ä»£ç 
- ç²¾ç¡®æ§åˆ¶å­æ¨¡å—ç‰ˆæœ¬
- èŠ‚çœå­˜å‚¨ç©ºé—´ï¼ˆå…±äº« Git å†å²ï¼‰
- å¯ä»¥ä¿æŒå­æ¨¡å—ä»£ç çš„ç‹¬ç«‹æ€§
- é€‚åˆå¤šä¸ªé¡¹ç›®å…±äº«ä»£ç 
- å®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶èƒ½åŠ›

**åŠ£åŠ¿ï¼š**
- å­¦ä¹ æˆæœ¬è¾ƒé«˜ï¼Œéœ€è¦æŒæ¡é¢å¤–çš„ Git å‘½ä»¤
- å›¢é˜Ÿæˆå‘˜éƒ½éœ€è¦ç†è§£ submodule æœºåˆ¶
- å­æ¨¡å—æ›´æ–°æµç¨‹è¾ƒå¤æ‚
- å¯èƒ½å¯¼è‡´é¡¹ç›®ç»“æ„å¤æ‚åŒ–
- å®¹æ˜“å‡ºç°åŒæ­¥é—®é¢˜
- å¯¹å¼€å‘å·¥å…·çš„é›†æˆæ”¯æŒä¸å¦‚ npm æ–¹å¼å‹å¥½

### Git Dependencies
é€šè¿‡ package.json ä¸­çš„ä¾èµ–é…ç½®å¼•ç”¨ Git ä»“åº“ä¸­çš„ç»„ä»¶åº“ã€‚æœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨äº† npm å¯¹ Git ä»“åº“çš„æ”¯æŒç‰¹æ€§ï¼Œ
å¯ä»¥ç›´æ¥åœ¨ package.json ä¸­é€šè¿‡ Git URL å¼•ç”¨ç»„ä»¶åº“ã€‚

**ä¼˜åŠ¿ï¼š**
- ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼ˆnpmï¼‰ç®¡ç†ï¼Œæµç¨‹è‡ªç„¶
- å®‰è£…å’Œæ›´æ–°æµç¨‹ç®€å•ï¼Œåªéœ€ \`npm install\` æˆ– \`npm update\`
- é¡¹ç›®ç›¸äº’ç‹¬ç«‹ï¼Œä¸ä¼šäº’ç›¸å½±å“
- å¯ä»¥çµæ´»åˆ‡æ¢ç‰ˆæœ¬ï¼Œåˆ†æ”¯æˆ– commit
- ä¸ç°æœ‰æ„å»ºå·¥å…·å’Œå¼€å‘æµç¨‹å®Œå…¨å…¼å®¹
- ä¸ä¼šæ”¹å˜é¡¹ç›®ç»“æ„
- ä¸éœ€è¦å‘å¸ƒåˆ° npm ä»“åº“ï¼Œä½†ä¿æŒäº†ç±»ä¼¼çš„ä½¿ç”¨ä½“éªŒ
- å¼€å‘è°ƒè¯•æ–¹ä¾¿ï¼Œå¯ä»¥é€šè¿‡ npm link å®ç°æœ¬åœ°è”è°ƒ

**åŠ£åŠ¿ï¼š**
- é¦–æ¬¡å®‰è£…å’Œæ›´æ–°æ—¶éœ€è¦å®Œæ•´å…‹éš†ä»“åº“ï¼Œå¯èƒ½è¾ƒæ…¢
- æ›´æ–°éœ€è¦é‡æ–°å®‰è£…ä¾èµ–
- éœ€è¦é¢å¤–çš„åˆ†æ”¯ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶ç­–ç•¥

## ä¸ºä»€ä¹ˆé€‰æ‹© Git Dependenciesï¼Ÿ

åœ¨è¯¦ç»†è®¨è®ºå’Œå¯¹æ¯”åï¼Œæˆ‘ä»¬é€‰æ‹©äº† Git Dependencies æ–¹æ¡ˆï¼Œä¸»è¦åŸºäºä»¥ä¸‹è€ƒè™‘ï¼š

1. **ç®€å•æ€§**
   - ä½¿ç”¨ç†Ÿæ‚‰çš„ npm å·¥å…·é“¾ï¼Œä¸éœ€è¦å­¦ä¹ æ–°çš„å·¥å…·
   - ä¸éœ€è¦å­¦ä¹ é¢å¤–çš„ Git å‘½ä»¤ï¼Œé™ä½å›¢é˜Ÿå­¦ä¹ æˆæœ¬
   - é¡¹ç›®ç»“æ„æ¸…æ™°ç®€å•ï¼Œé¿å…å­æ¨¡å—å¸¦æ¥çš„å¤æ‚æ€§
   - å¼€å‘æµç¨‹ä¸ç°æœ‰ä¹ æƒ¯ä¸€è‡´ï¼Œæ— éœ€æ”¹å˜å·¥ä½œæ–¹å¼

2. **ç‹¬ç«‹æ€§**
   - ç»„ä»¶åº“å®Œå…¨ç‹¬ç«‹ç»´æŠ¤ï¼Œæœ‰ä¸“é—¨çš„å›¢é˜Ÿè´Ÿè´£
   - ä¸åŒé¡¹ç›®å¯ä»¥ä½¿ç”¨ä¸åŒç‰ˆæœ¬ï¼Œäº’ä¸å½±å“
   - é¿å…ä»£ç è€¦åˆï¼ŒèŒè´£åˆ’åˆ†æ¸…æ™°
   - ç»„ä»¶åº“å¯ä»¥ç‹¬ç«‹æ¼”è¿›ï¼Œä¸å—é¡¹ç›®é™åˆ¶

3. **å¼€å‘ä½“éªŒ**
   - æ”¯æŒæœ¬åœ°å¼€å‘è°ƒè¯•ï¼ˆé€šè¿‡ npm linkï¼‰
   - ä¸ç°æœ‰å¼€å‘æµç¨‹å®Œå…¨å…¼å®¹
   - ç‰ˆæœ¬ç®¡ç†æ›´åŠ ç›´è§‚
   - è°ƒè¯•å’Œæ›´æ–°æµç¨‹ç®€å•æ˜ç¡®

4. **å›¢é˜Ÿåä½œ**
   - é™ä½å›¢é˜Ÿåä½œæˆæœ¬
   - é¿å… Git Submodule å¸¦æ¥çš„åŒæ­¥é—®é¢˜
   - ç¬¦åˆå›¢é˜Ÿç°æœ‰çš„å¼€å‘ä¹ æƒ¯
   - æ›´å®¹æ˜“è¿›è¡Œç‰ˆæœ¬æ§åˆ¶

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆè¦æ‰§è¡Œ npm link vue naive-uiï¼Ÿç›´æ¥ npm link ä¸è¡Œå—ï¼Ÿ
A: è¿™æ¶‰åŠåˆ° Vue çš„å¤šå®ä¾‹é—®é¢˜ï¼š

1. **ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·åš**ï¼š
   - ç›´æ¥ä½¿ç”¨ `npm link` æ—¶ï¼Œç»„ä»¶åº“ä¼šä½¿ç”¨è‡ªå·± `node_modules` ä¸­çš„ Vue å’Œ NaiveUI
   - ä¸»é¡¹ç›®ä¹Ÿæœ‰è‡ªå·±çš„ Vue å’Œ NaiveUI
   - è¿™ä¼šå¯¼è‡´åŒæ—¶å­˜åœ¨ä¸¤ä¸ª Vue å®ä¾‹å’Œä¸¤ä¸ª NaiveUI å®ä¾‹
   - Vue ç‰¹åˆ«æ•æ„Ÿï¼Œå¤šå®ä¾‹ä¼šå¯¼è‡´ï¼š
     - ç»„ä»¶é€šä¿¡å¤±æ•ˆ
     - å“åº”å¼å¤±æ•ˆ
     - hooks ä¸æ­£å¸¸å·¥ä½œ
     - ç±»å‹æ£€æŸ¥é”™è¯¯

2. **æ¨èçš„è§£å†³æ–¹æ¡ˆ**ï¼š
   åœ¨ç»„ä»¶åº“çš„ package.json ä¸­æ·»åŠ é“¾æ¥è„šæœ¬ï¼š
```json
{
  "scripts": {
    "link": "npm link && npm link vue naive-ui",
    "unlink": "npm rm --global my-components"
  }
}
```

å¦‚æœé‡åˆ°ä»¥ä¸‹æƒ…å†µï¼Œå¾ˆå¯èƒ½æ˜¯å¤šå®ä¾‹å¯¼è‡´çš„ï¼š
- ç»„ä»¶çš„ props æˆ–äº‹ä»¶ä¸ç”Ÿæ•ˆ
- ç»„ä»¶å†…çš„å“åº”å¼æ•°æ®ä¸æ›´æ–°
- NaiveUI çš„ä¸»é¢˜æˆ–æ ·å¼å¼‚å¸¸
- Vue çš„å¼€å‘å·¥å…·æ˜¾ç¤ºå¤šä¸ª Vue å®ä¾‹

### Q2: ç»„ä»¶åº“å’Œä¸»é¡¹ç›®ä½¿ç”¨ç›¸åŒçš„ UI æ¡†æ¶ï¼ˆå¦‚ NaiveUIï¼‰ä¼šæœ‰å†²çªå—ï¼Ÿ
A: è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼Œé€šè¿‡åˆç†é…ç½®å¯ä»¥é¿å…å†²çªï¼š

1. åœ¨ç»„ä»¶åº“ä¸­å°† UI æ¡†æ¶è®¾ç½®ä¸º peerDependencyï¼š
```json
{
  "peerDependencies": {
    "naive-ui": "^2.x",
    "vue": "^3.x"
  },
  "devDependencies": {
    "naive-ui": "^2.x",
    "vue": "^3.x"
  }
}
```

2. é…ç½®æ„å»ºæ—¶å¤–éƒ¨åŒ–è¿™äº›ä¾èµ–ï¼š
```typescript
// vite.config.ts
export default defineConfig({
  build: {
    rollupOptions: {
      external: ['vue', 'naive-ui'],
      output: {
        globals: {
          vue: 'Vue',
          'naive-ui': 'naive'
        }
      }
    }
  }
})
```

3. ä½¿ç”¨ npm link æ—¶é“¾æ¥ä¸»é¡¹ç›®çš„ä¾èµ–ï¼š
```bash
npm link vue naive-ui
```

è¿™æ ·å¯ä»¥ï¼š
- é¿å…é‡å¤æ‰“åŒ…
- é˜²æ­¢å¤šå®ä¾‹é—®é¢˜
- å‡å°æ‰“åŒ…ä½“ç§¯
- ç¡®ä¿ç‰ˆæœ¬ä¸€è‡´æ€§

### Q3: ç»„ä»¶åº“å¦‚ä½•ç‹¬ç«‹å¼€å‘å’Œè°ƒè¯•ï¼Ÿ
A: ç»„ä»¶åº“é¡¹ç›®éœ€è¦åŒ…å«å®Œæ•´çš„å¼€å‘ç¯å¢ƒï¼š

1. ç›®å½•ç»“æ„ï¼š
```
my-components/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # ç»„ä»¶æºç 
â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â””â”€â”€ index.ts      # ç»„ä»¶å¯¼å‡º
â”‚   â””â”€â”€ dev/              # å¼€å‘ç¯å¢ƒ
â”‚       â”œâ”€â”€ App.vue       # æµ‹è¯•é¡µé¢
â”‚       â””â”€â”€ main.ts       # å¼€å‘å…¥å£
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

2. å¼€å‘å…¥å£é…ç½®ï¼š
```typescript
// src/dev/main.ts
import { createApp } from 'vue'
import naive from 'naive-ui'
import App from './App.vue'
import MyComponents from '../components'

const app = createApp(App)
app.use(naive)
app.use(MyComponents)
app.mount('#app')
```

3. æµ‹è¯•é¡µé¢ç¤ºä¾‹ï¼š
```vue
<!-- src/dev/App.vue -->
<template>
  <div>
    <h1>ç»„ä»¶æµ‹è¯•é¡µé¢</h1>
    <my-button>æµ‹è¯•æŒ‰é’®</my-button>
  </div>
</template>
```

è¿™æ ·å¯ä»¥ï¼š
1. ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•ç»„ä»¶
2. æä¾›å¼€å‘æ—¶çš„å³æ—¶åé¦ˆ
3. æ–¹ä¾¿ç¼–å†™ç¤ºä¾‹å’Œæ–‡æ¡£
4. ç¡®ä¿ç»„ä»¶çš„ç‹¬ç«‹æ€§

### Q4: å¦‚ä½•æ›´æ–°ç»„ä»¶åº“ï¼Ÿ
A: æ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©æ›´æ–°æ–¹å¼ï¼š

1. å¼€å‘ç¯å¢ƒï¼š
   - ä½¿ç”¨ npm link è¿›è¡Œæœ¬åœ°å¼€å‘
   - åŸºäº Vite çš„çƒ­æ›´æ–°ï¼Œä¿®æ”¹å³å¯å®æ—¶é¢„è§ˆ
   - æ— éœ€æ‰‹åŠ¨é‡å¯æˆ–é‡æ–°æ„å»º

2. æµ‹è¯•ç¯å¢ƒï¼š
   - ä½¿ç”¨ç‰¹å®šåˆ†æ”¯æˆ– commit
   - å¯ä»¥æµ‹è¯•æ–°åŠŸèƒ½
   - æ–¹ä¾¿å›æ»š

3. ç”Ÿäº§ç¯å¢ƒï¼š
   - ä½¿ç”¨ç‰¹å®šçš„ tag ç‰ˆæœ¬
   - ç¡®ä¿ç¨³å®šæ€§
   - ç‰ˆæœ¬å¯æ§

æ›´æ–°å‘½ä»¤ï¼š
```bash
# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
npm update my-components

# æ›´æ–°åˆ°ç‰¹å®šç‰ˆæœ¬
npm install my-components@git+https://github.com/username/my-components.git#v1.0.1
```

### Q5: å¦‚ä½•ç®¡ç†ç»„ä»¶åº“ç‰ˆæœ¬ï¼Ÿ
A: é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†ï¼š

1. ç‰ˆæœ¬å·è§„åˆ™ï¼š
   - ä¸»ç‰ˆæœ¬å·ï¼šä¸å…¼å®¹çš„ API ä¿®æ”¹
   - æ¬¡ç‰ˆæœ¬å·ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
   - ä¿®è®¢å·ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

2. å‘å¸ƒæµç¨‹ï¼š
```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
npm version patch/minor/major

# 2. åˆ›å»º tag
git tag v1.0.1

# 3. æ¨é€åˆ°è¿œç¨‹
git push origin main --tags
```

3. ç‰ˆæœ¬æ—¥å¿—ï¼š
   - è®°å½•æ¯ä¸ªç‰ˆæœ¬çš„å˜æ›´
   - è¯´æ˜ä¸å…¼å®¹çš„ä¿®æ”¹
   - æ ‡æ³¨åºŸå¼ƒçš„åŠŸèƒ½

### Q6: ä¸ºä»€ä¹ˆéœ€è¦ peerDependenciesï¼ŸdevDependencies ä¸å¤Ÿç”¨å—ï¼Ÿ
A: `peerDependencies` å’Œ `devDependencies` çš„ä½œç”¨æ˜¯ä¸åŒçš„ï¼š

1. **devDependenciesï¼ˆå¼€å‘ä¾èµ–ï¼‰**ï¼š
   - ä»…åœ¨ç»„ä»¶åº“å¼€å‘æ—¶ä½¿ç”¨
   - ä¸ä¼šè¢«å®‰è£…åˆ°ä½¿ç”¨è¯¥ç»„ä»¶åº“çš„é¡¹ç›®ä¸­
   - ç”¨äºå¼€å‘ã€æ„å»ºã€æµ‹è¯•ç­‰ç¯å¢ƒ
   - ä¾‹å¦‚ï¼šç”¨äºæœ¬åœ°å¼€å‘æ—¶æä¾› Vue å’Œ NaiveUI ç¯å¢ƒ

2. **peerDependenciesï¼ˆå¯¹ç­‰ä¾èµ–ï¼‰**ï¼š
   - å£°æ˜ç»„ä»¶åº“ä¸å“ªäº›ä¾èµ–å…¼å®¹
   - è¦æ±‚ä½¿ç”¨è¯¥ç»„ä»¶åº“çš„é¡¹ç›®å¿…é¡»å®‰è£…è¿™äº›ä¾èµ–
   - é˜²æ­¢ä¾èµ–ç‰ˆæœ¬å†²çª
   - ä¾‹å¦‚ï¼šå‘Šè¯‰ä½¿ç”¨è€…"è¿™ä¸ªç»„ä»¶åº“éœ€è¦ Vue 3.x æ‰èƒ½æ­£å¸¸å·¥ä½œ"

ä¸¾ä¸ªä¾‹å­ï¼š
```json
{
  "name": "my-components",
  "peerDependencies": {
    "vue": "^3.x"  // å‘Šè¯‰ä½¿ç”¨è€…ï¼šä½ éœ€è¦å®‰è£… Vue 3.x
  },
  "devDependencies": {
    "vue": "^3.x"  // ä»…ç”¨äºç»„ä»¶åº“å¼€å‘
  }
}
```

å¦‚æœä¸å®šä¹‰ `peerDependencies`ï¼š
- ä½¿ç”¨è€…å¯èƒ½ç”¨ Vue 2.x å®‰è£…ç»„ä»¶åº“ï¼ˆä¼šå¯¼è‡´é”™è¯¯ï¼‰
- æ— æ³•çŸ¥é“éœ€è¦å®‰è£…ä»€ä¹ˆç‰ˆæœ¬çš„ä¾èµ–
- npm ä¸ä¼šæç¤ºç¼ºå°‘å¿…è¦çš„ä¾èµ–

ä½¿ç”¨ `peerDependencies` çš„å¥½å¤„ï¼š
1. æ˜ç¡®å£°æ˜ä¾èµ–è¦æ±‚
2. npm ä¼šæ£€æŸ¥ç‰ˆæœ¬å…¼å®¹æ€§
3. é¿å…é‡å¤å®‰è£…æ ¸å¿ƒä¾èµ–
4. é˜²æ­¢ç‰ˆæœ¬å†²çª

### Q7: æ¯æ¬¡å¼€æœºå¯åŠ¨é¡¹ç›®éƒ½éœ€è¦æ‰§è¡Œ npm link å—ï¼Ÿ
A: ä¸éœ€è¦ã€‚npm link åˆ›å»ºçš„æ˜¯å…¨å±€ç¬¦å·é“¾æ¥ï¼Œä¸€æ—¦å»ºç«‹å°±ä¼šæŒç»­å­˜åœ¨ï¼Œé™¤éï¼š

1. æ˜¾å¼åœ°æ‰§è¡Œäº† `npm unlink`
2. åˆ é™¤äº† `node_modules` ç›®å½•éœ€è¦é‡æ–° `npm install`
3. é‡æ–°å®‰è£…äº† Node.js

æ‰€ä»¥åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ åªéœ€è¦ï¼š

1. ç»„ä»¶åº“ç›®å½• (`my-components`)ï¼š
```bash
npm run dev
```

2. ä¸»é¡¹ç›®ç›®å½• (`my-project`)ï¼š
```bash
npm run dev
```

åªæœ‰åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œä½ æ‰éœ€è¦é‡æ–°æ‰§è¡Œ linkï¼š
1. å¦‚æœä½ æ‰§è¡Œäº† `npm unlink`
2. å¦‚æœä½ åˆ é™¤äº† `node_modules` å¹¶é‡æ–° `npm install`
3. å¦‚æœä½ é‡æ–°å®‰è£…äº† Node.js
4. å¦‚æœé“¾æ¥å‡ºç°äº†é—®é¢˜ï¼ˆæ¯”å¦‚ç»„ä»¶æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼‰

ç®€å•æ¥è¯´ï¼š
- âœ… æ—¥å¸¸å¼€å‘ï¼šç›´æ¥å¯åŠ¨é¡¹ç›®å°±å¥½
- âŒ ä¸éœ€è¦æ¯æ¬¡å¼€æœºéƒ½ link
- ğŸ”„ åªæœ‰åœ¨é“¾æ¥è¢«ç ´åæ—¶æ‰éœ€è¦é‡æ–° link

### Q8: ä¸»é¡¹ç›®èƒ½è¦†ç›–ç»„ä»¶åº“çš„é»˜è®¤æ ·å¼å—ï¼Ÿ
A: æ˜¯çš„ï¼Œä¸»é¡¹ç›®å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¦†ç›–ç»„ä»¶åº“çš„æ ·å¼ï¼š

1. **é€šè¿‡ NaiveUI çš„ä¸»é¢˜ç³»ç»Ÿ**ï¼š
```ts
<script setup lang="ts">
import { NConfigProvider } from 'naive-ui'

const themeOverrides = {
  common: {
    primaryColor: '#ff6600'
  }
}
</script>

<template>
  <n-config-provider :theme-overrides="themeOverrides">
    <div class="container">
      <h1>æµ‹è¯•ç»„ä»¶åº“</h1>
      <div class="demo-section">
        <h2>æŒ‰é’®ç»„ä»¶</h2>
        <div class="button-group">
          <my-button></my-button>
          <my-button type="primary">ä¸»è¦æŒ‰é’®</my-button>
          <my-button type="success">æˆåŠŸæŒ‰é’®</my-button>
          <my-button type="warning">è­¦å‘ŠæŒ‰é’®</my-button>
          <my-button type="error">é”™è¯¯æŒ‰é’®</my-button>
        </div>
      </div>
    </div>
  </n-config-provider>
</template>
```

2. **é€šè¿‡å…¨å±€ CSS è¦†ç›–**ï¼š
```css
<!-- å…¨å±€æ ·å¼ -->
<style>
/* ä¿®æ”¹æ‰€æœ‰æŒ‰é’®çš„åŸºç¡€æ ·å¼ */
.n-button {
  border-radius: 20px !important;  /* åœ†è§’æŒ‰é’® */
  height: 40px !important;         /* ç»Ÿä¸€é«˜åº¦ */
  padding: 0 24px !important;      /* å·¦å³å†…è¾¹è· */
  font-weight: bold !important;    /* ç²—ä½“æ–‡å­— */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important; /* æ·»åŠ é˜´å½± */
  transition: all 0.3s ease !important;  /* å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
}

/* æ‚¬åœæ•ˆæœ */
.n-button:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15) !important;
}

/* ç‚¹å‡»æ•ˆæœ */
.n-button:active {
  transform: translateY(1px) !important;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
}
</style>

```

è¿™ä¸¤ç§æ–¹å¼éƒ½èƒ½è¦†ç›–ç»„ä»¶åº“æ ·å¼ï¼Œå¹¶ä¸”è¿™ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ¿ï¼š

1. **ä¸»é¢˜ç³»ç»Ÿ**ï¼š
   - ä½¿ç”¨ NaiveUI çš„åŸç”Ÿä¸»é¢˜æœºåˆ¶
   - æ›´åŠ å¯æ§å’Œå¯ç»´æŠ¤
   - é€‚åˆç³»ç»Ÿçº§çš„æ ·å¼å®šåˆ¶
   - ä¸éœ€è¦ä½¿ç”¨ `!important`

2. **å…¨å±€ CSS**ï¼š
   - æ›´çµæ´»ï¼Œå¯ä»¥ä¿®æ”¹ä»»ä½•æ ·å¼å±æ€§
   - å¯ä»¥æ·»åŠ æ–°çš„æ ·å¼æ•ˆæœï¼ˆå¦‚é˜´å½±ã€åŠ¨ç”»ï¼‰
   - é€‚åˆé¡¹ç›®çº§çš„æ·±åº¦å®šåˆ¶
   - å¯èƒ½éœ€è¦ä½¿ç”¨ `!important` æ¥ç¡®ä¿ä¼˜å…ˆçº§

æ¨èçš„ä½¿ç”¨æ–¹å¼ï¼š
- é¢œè‰²ã€å°ºå¯¸ç­‰ä¸»é¢˜ç›¸å…³çš„æ ·å¼ â†’ ä½¿ç”¨ä¸»é¢˜ç³»ç»Ÿ
- ç‰¹æ®Šçš„äº¤äº’æ•ˆæœå’Œè§†è§‰æ•ˆæœ â†’ ä½¿ç”¨å…¨å±€ CSS

æ³¨æ„äº‹é¡¹ï¼š
1. ä½¿ç”¨å…¨å±€ CSS æ—¶è¦æ³¨æ„é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§
2. åˆç†ä½¿ç”¨ `!important`ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨
3. ä¿æŒæ ·å¼çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§

## å¦‚ä½•å®æ–½

### 1. ç»„ä»¶åº“è®¾ç½®
ç»„ä»¶åº“éœ€è¦åˆç†é…ç½®ä»¥æ”¯æŒä½œä¸ºä¾èµ–åº“ä½¿ç”¨ï¼ŒåŒæ—¶ä¿æŒå¼€å‘çš„ä¾¿åˆ©æ€§ã€‚

```bash
# åˆ›å»ºå¹¶åˆå§‹åŒ–ç»„ä»¶åº“
mkdir my-components
cd my-components
npm init vite@latest . -- --template vue-ts

# é…ç½® package.json
{
  "name": "my-components",
  "version": "1.0.0",
  "main": "dist/my-components.umd.js",  # æŒ‡å®š UMD æ ¼å¼çš„å…¥å£æ–‡ä»¶
  "module": "dist/my-components.es.js",  # æŒ‡å®š ES æ¨¡å—æ ¼å¼çš„å…¥å£æ–‡ä»¶
  "types": "dist/types/index.d.ts",      # æŒ‡å®šç±»å‹å£°æ˜æ–‡ä»¶
  "files": [                             # æŒ‡å®šè¦å‘å¸ƒçš„æ–‡ä»¶
    "dist"
  ],
  "scripts": {
    "dev": "vite",                       # å¼€å‘ç¯å¢ƒ
    "build": "vite build",               # æ„å»ºåº“
    "preview": "vite preview",            # é¢„è§ˆæ„å»ºç»“æœ
    "link": "npm link && npm link vue naive-ui",
    "unlink": "npm rm --global my-components"
  },
  "peerDependencies": {                  # å¯¹ç­‰ä¾èµ–ï¼Œç”±ä¸»é¡¹ç›®æä¾›
    "naive-ui": "^2.x",
    "vue": "^3.x"
  },
  "devDependencies": {                   # å¼€å‘ä¾èµ–ï¼Œä¸ä¼šæ‰“åŒ…è¿›åº“
    "naive-ui": "^2.x",
    "vue": "^3.x",
    "vite": "^5.x",
    "typescript": "^5.x"
  }
}

# é…ç½® vite.config.ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

export default defineConfig({
  plugins: [vue()],
  build: {
    lib: {
      entry: resolve(__dirname, 'src/components/index.ts'),
      name: 'MyComponents',
      fileName: 'my-components'
    },
    rollupOptions: {
      external: ['vue', 'naive-ui'],  # å¤–éƒ¨åŒ–å¤„ç†çš„ä¾èµ–
      output: {
        globals: {
          vue: 'Vue',
          'naive-ui': 'naive'
        }
      }
    }
  }
})

# æäº¤åˆ° GitHub
git init
git add .
git commit -m "init: project setup"
git remote add origin https://github.com/username/my-components.git
git push -u origin main
```

### 2. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨
é¡¹ç›®å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¼•ç”¨ç»„ä»¶åº“ï¼Œæ ¹æ®ä¸åŒç¯å¢ƒé€‰æ‹©åˆé€‚çš„æ–¹å¼ã€‚

#### 2.1 æµ‹è¯•ç¯å¢ƒ
åœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬é€šå¸¸å¸Œæœ›ä½¿ç”¨æœ€æ–°çš„å¼€å‘ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ main åˆ†æ”¯ï¼š

```json
// package.json
{
  "dependencies": {
    "my-components": "git+https://github.com/username/my-components.git#main"
  }
}
```

ç„¶åæ‰§è¡Œï¼š
```bash
# å®‰è£…/æ›´æ–°åˆ°æœ€æ–°çš„ main åˆ†æ”¯ç‰ˆæœ¬
npm install

# æˆ–è€…ç›´æ¥æ›´æ–°ç»„ä»¶åº“
npm update my-components
```

3. å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å›é€€åˆ°ç‰¹å®šçš„ commitï¼š
```bash
npm install my-components@git+https://github.com/username/my-components.git#commit-hash
```

#### 2.2 ç”Ÿäº§ç¯å¢ƒ
ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ç‰¹å®šçš„æ ‡ç­¾ç‰ˆæœ¬ï¼Œç¡®ä¿ç¨³å®šæ€§ï¼š

```json
{
  "dependencies": {
    "my-components": "git+https://github.com/username/my-components.git#v1.0.0"
  }
}
```

#### 2.3 åŠŸèƒ½æµ‹è¯•
å¦‚æœéœ€è¦æµ‹è¯•ç‰¹å®šåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨åŠŸèƒ½åˆ†æ”¯ï¼š

```json
{
  "dependencies": {
    "my-components": "git+https://github.com/username/my-components.git#feature/new-button"
  }
}
```

#### 2.4 ç´§æ€¥ä¿®å¤
å¯¹äºç´§æ€¥é—®é¢˜çš„ä¿®å¤ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹å®šçš„ commitï¼š

```json
{
  "dependencies": {
    "my-components": "git+https://github.com/username/my-components.git#commit-hash"
  }
}
```

### 3. å¼€å‘å·¥ä½œæµ
ç»„ä»¶åº“çš„å¼€å‘å’Œä½¿ç”¨æ¶‰åŠå¤šä¸ªåœºæ™¯ï¼Œéœ€è¦é‡‡ç”¨ä¸åŒçš„å·¥ä½œæµç¨‹ã€‚

#### 3.1 ç‹¬ç«‹å¼€å‘ç»„ä»¶
å½“éœ€è¦å¼€å‘æ–°ç»„ä»¶æˆ–ä¿®æ”¹ç°æœ‰ç»„ä»¶æ—¶ï¼š
```bash
# 1. åœ¨ç»„ä»¶åº“ä¸­åˆ›å»ºæ–°åˆ†æ”¯
cd my-components
git checkout -b feature/new-component

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 3. å¼€å‘å’Œæµ‹è¯•
# ç¼–å†™ç»„ä»¶ä»£ç å’Œæµ‹è¯•ç”¨ä¾‹

# 4. æ„å»ºå’ŒéªŒè¯
npm run build
npm run test  # å¦‚æœæœ‰æµ‹è¯•

# 5. æäº¤ä»£ç 
git add .
git commit -m "feat: add new component"
git push origin feature/new-component

# 6. åˆ›å»º PR å¹¶åˆå¹¶åˆ°ä¸»åˆ†æ”¯
# åœ¨ GitHub ä¸Šæ“ä½œ

# 7. åˆ›å»ºæ–°ç‰ˆæœ¬
git tag v1.0.1
git push origin v1.0.1
```

#### 3.2 æœ¬åœ°è”è°ƒå¼€å‘
å½“éœ€è¦åœ¨ä¸»é¡¹ç›®ä¸­è°ƒè¯•ç»„ä»¶åº“æ—¶ï¼š
```bash
# 1. åœ¨ç»„ä»¶åº“ä¸­åˆ›å»ºé“¾æ¥
cd my-components
npm link
npm link vue naive-ui  # é“¾æ¥ä¸»é¡¹ç›®çš„ä¾èµ–ï¼Œé¿å…å¤šå®ä¾‹é—®é¢˜

# 2. åœ¨ä¸»é¡¹ç›®ä¸­ä½¿ç”¨é“¾æ¥
cd my-project
npm link my-components

# 3. åŒæ—¶å¯åŠ¨ä¸¤ä¸ªé¡¹ç›®
# ç»ˆç«¯1ï¼šç»„ä»¶åº“
cd my-components
npm run dev

# ç»ˆç«¯2ï¼šä¸»é¡¹ç›®
cd my-project
npm run dev

# 4. å®Œæˆè°ƒè¯•åå–æ¶ˆé“¾æ¥(ä¹Ÿå¯ä»¥ä¸å–æ¶ˆï¼Œä¸‹æ¬¡ä½¿ç”¨å°±ä¸éœ€è¦å†æ¬¡linkï¼Œç›´æ¥npm run devå³å¯)
cd my-project
npm run unlink
cd ../my-components
npm run unlink
```

## æœ€ä½³å®è·µ

1. **ç»„ä»¶åº“å¼€å‘**
   - ä¿æŒç»„ä»¶åº“çš„ç‹¬ç«‹æ€§
   - å®Œå–„çš„æ–‡æ¡£å’Œç¤ºä¾‹
   - è¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†
   - å•å…ƒæµ‹è¯•è¦†ç›–
   - ç»„ä»¶é¢„è§ˆé¡µé¢

2. **é¡¹ç›®ä½¿ç”¨**
   - é”å®šç‰¹å®šçš„ç»„ä»¶åº“ç‰ˆæœ¬
   - ä½¿ç”¨ npm link è¿›è¡Œæœ¬åœ°å¼€å‘
   - åŠæ—¶æ›´æ–°åˆ°ç¨³å®šç‰ˆæœ¬
   - åšå¥½ç‰ˆæœ¬æ›´æ–°æµ‹è¯•

3. **å›¢é˜Ÿåä½œ**
   - æ˜ç¡®çš„è´£ä»»åˆ’åˆ†
   - æ ‡å‡†çš„å·¥ä½œæµç¨‹
   - è‰¯å¥½çš„ç‰ˆæœ¬æ§åˆ¶
   - å®Œå–„çš„æ›´æ–°æœºåˆ¶
   - ç»Ÿä¸€çš„ä»£ç è§„èŒƒ

4. **ç‰ˆæœ¬ç®¡ç†**
   - éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬
   - ç»´æŠ¤æ›´æ–°æ—¥å¿—
   - åŠæ—¶æ ‡è®°ç‰ˆæœ¬
   - åˆ†æ”¯ç®¡ç†è§„èŒƒ

## æ³¨æ„äº‹é¡¹

1. **ä¾èµ–ç®¡ç†**
   - åˆç†ä½¿ç”¨ peerDependencies
   - é¿å…ä¾èµ–å†²çª
   - æ§åˆ¶ä¾èµ–ç‰ˆæœ¬èŒƒå›´
   - åŠæ—¶æ›´æ–°ä¾èµ–ç‰ˆæœ¬

2. **æ€§èƒ½ä¼˜åŒ–**
   - ç»„ä»¶æŒ‰éœ€åŠ è½½
   - åˆç†çš„æ‰“åŒ…é…ç½®
   - é¿å…é‡å¤ä¾èµ–
   - ä¼˜åŒ–æ„å»ºäº§ç‰©

3. **å…¼å®¹æ€§**
   - å‘ä¸‹å…¼å®¹åŸåˆ™
   - åºŸå¼ƒæç¤ºæœºåˆ¶
   - ç‰ˆæœ¬è¿ç§»æŒ‡å—
   - ç ´åæ€§æ›´æ–°è¯´æ˜

4. **æ–‡æ¡£ç»´æŠ¤**
   - ä½¿ç”¨è¯´æ˜
   - ç¤ºä¾‹ä»£ç 
   - æ›´æ–°æ—¥å¿—
   - API æ–‡æ¡£
   - å¸¸è§é—®é¢˜

è¿™ç§æ–¹æ¡ˆå®Œå…¨é€šè¿‡ Git å’Œ npm ç”Ÿæ€æ¥ç®¡ç†ç»„ä»¶åº“ï¼Œæ—¢ä¿æŒäº†å¼€å‘çš„çµæ´»æ€§ï¼Œåˆä¸å¤±å·¥ç¨‹åŒ–çš„è§„èŒƒæ€§ã€‚é€šè¿‡åˆç†çš„é…ç½®å’Œè§„èŒƒçš„æµç¨‹ï¼Œå¯ä»¥å¾ˆå¥½åœ°æœåŠ¡äºå›¢é˜Ÿçš„ç»„ä»¶åŒ–å¼€å‘éœ€æ±‚ã€‚ 